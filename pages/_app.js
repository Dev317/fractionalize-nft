import '../styles/globals.css'
import Link from 'next/link'
import Head from 'next/head'
import Web3Modal from 'web3modal'
import { ethers } from 'ethers'
import CoinbaseWalletSDK from '@coinbase/wallet-sdk'
import { useState } from 'react'
import { BiWallet } from 'react-icons/bi'


const providerOptions = {
  coinbasewallet: {
    package: CoinbaseWalletSDK,
    options: {
      appName: "Web3Modal",
      infuraId: {5 : "https://goerli.infura.io/v3/147bc9ac34ea45fba4e3609a373339d2"}
    }
  }
}

function HomebaseLogo() {
  return (
    <svg width="200" height="40" viewBox="0 0 516 96" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fillRule="evenodd" clipRule="evenodd" d="M48.3382 1.80125e-05C49.0775 0.00273856 49.7819 0.313496 50.2811 0.857094L96 50.6451L92.0947 54.2088L48.314 6.53156L3.87884 54.21L0 50.6176L46.389 0.842771C46.8922 0.302862 47.5989 -0.00270253 48.3382 1.80125e-05Z" fill="#434547"/>
      <path fillRule="evenodd" clipRule="evenodd" d="M17.0916 42.8806H44.0335V59.8773H38.739V48.1585H22.386V90.7221H38.739V67.6885H56.8616V90.7221H73.6155V48.1585H56.8616V59.8773H51.5671V42.8806H78.91V96H51.5671V72.9664H44.0335V96H17.0916V42.8806Z" fill="#434547"/>
      <path fillRule="evenodd" clipRule="evenodd" d="M79.0686 16.8142L79.0686 34.3561L73.7741 34.3561L73.7741 16.8142L79.0686 16.8142Z" fill="#434547"/>
      <path d="M137.995 39.527C141.258 35.7429 145.385 33.8509 150.375 33.8509C159.863 33.8509 164.675 39.2665 164.812 50.0977V79.1774H154.817V50.4679C154.817 47.3967 154.146 45.2305 152.802 43.9692C151.486 42.6804 149.539 42.036 146.961 42.036C142.958 42.036 139.969 43.8183 137.995 47.383V79.1774H128V16H137.995V39.527Z" fill="#434547"/>
      <path d="M173.08 56.5141C173.08 52.1542 173.943 48.2331 175.671 44.7506C177.398 41.2408 179.825 38.5536 182.951 36.6889C186.077 34.7969 189.669 33.8509 193.728 33.8509C199.733 33.8509 204.6 35.7841 208.329 39.6504C212.086 43.5167 214.115 48.6444 214.416 55.0334L214.458 57.3779C214.458 61.7652 213.608 65.6864 211.907 69.1414C210.235 72.5964 207.822 75.2699 204.668 77.162C201.542 79.054 197.923 80 193.81 80C187.53 80 182.499 77.916 178.715 73.7481C174.958 69.5527 173.08 63.9726 173.08 57.0077V56.5141ZM183.075 57.3779C183.075 61.9572 184.021 65.5493 185.913 68.1542C187.805 70.7318 190.437 72.0206 193.81 72.0206C197.183 72.0206 199.801 70.7044 201.666 68.072C203.558 65.4396 204.504 61.587 204.504 56.5141C204.504 52.0171 203.53 48.4524 201.584 45.8201C199.664 43.1877 197.045 41.8715 193.728 41.8715C190.464 41.8715 187.873 43.174 185.954 45.7789C184.034 48.3565 183.075 52.2228 183.075 57.3779Z" fill="#434547"/>
      <path d="M232.308 34.6735L232.596 39.3213C235.722 35.6744 240 33.8509 245.429 33.8509C251.38 33.8509 255.452 36.1268 257.645 40.6787C260.881 36.1268 265.433 33.8509 271.301 33.8509C276.209 33.8509 279.856 35.2082 282.242 37.9229C284.655 40.6375 285.889 44.641 285.943 49.9332V79.1774H275.949V50.2211C275.949 47.3967 275.332 45.3265 274.098 44.0103C272.864 42.6941 270.821 42.036 267.969 42.036C265.693 42.036 263.829 42.653 262.375 43.8869C260.949 45.0934 259.949 46.6838 259.373 48.6581L259.414 79.1774H249.419V49.892C249.282 44.6547 246.608 42.036 241.398 42.036C237.395 42.036 234.557 43.6675 232.884 46.9306V79.1774H222.889V34.6735H232.308Z" fill="#434547"/>
      <path d="M315.805 80C309.47 80 304.329 78.012 300.38 74.036C296.459 70.0326 294.499 64.7129 294.499 58.0771V56.8432C294.499 52.401 295.349 48.4387 297.049 44.9563C298.776 41.4464 301.189 38.7181 304.288 36.7712C307.386 34.8243 310.841 33.8509 314.653 33.8509C320.713 33.8509 325.388 35.7841 328.679 39.6504C331.997 43.5167 333.656 48.9871 333.656 56.0617V60.0925H304.576C304.877 63.7669 306.098 66.6735 308.236 68.8123C310.403 70.9512 313.117 72.0206 316.38 72.0206C320.96 72.0206 324.689 70.1697 327.568 66.4679L332.956 71.6093C331.174 74.2691 328.788 76.3393 325.799 77.8201C322.838 79.2733 319.506 80 315.805 80ZM314.612 41.8715C311.87 41.8715 309.649 42.8312 307.949 44.7506C306.276 46.6701 305.207 49.3436 304.74 52.7712H323.784V52.0308C323.565 48.6855 322.674 46.1628 321.111 44.4627C319.548 42.7352 317.381 41.8715 314.612 41.8715Z" fill="#434547"/>
      <path d="M380.504 57.3779C380.504 64.2879 378.955 69.7858 375.856 73.8715C372.785 77.9572 368.548 80 363.147 80C357.937 80 353.878 78.1217 350.972 74.365L350.478 79.1774H341.429V16H351.424V38.9512C354.303 35.551 358.183 33.8509 363.064 33.8509C368.494 33.8509 372.757 35.8663 375.856 39.8972C378.955 43.928 380.504 49.563 380.504 56.8021V57.3779ZM370.509 56.5141C370.509 51.6881 369.659 48.0686 367.959 45.6555C366.259 43.2425 363.791 42.036 360.555 42.036C356.223 42.036 353.179 43.928 351.424 47.7121V66.0566C353.207 69.9229 356.278 71.856 360.638 71.856C363.763 71.856 366.177 70.6907 367.877 68.3599C369.577 66.0291 370.454 62.5056 370.509 57.7892V56.5141Z" fill="#434547"/>
      <path d="M415.506 79.1774C415.068 78.3273 414.684 76.9426 414.355 75.0231C411.174 78.341 407.28 80 402.674 80C398.204 80 394.557 78.7249 391.733 76.1748C388.908 73.6247 387.496 70.4713 387.496 66.7147C387.496 61.9709 389.251 58.3376 392.761 55.8149C396.298 53.2648 401.344 51.9897 407.897 51.9897H414.026V49.0694C414.026 46.7661 413.381 44.9289 412.093 43.5578C410.804 42.1594 408.843 41.4602 406.211 41.4602C403.935 41.4602 402.07 42.036 400.617 43.1877C399.164 44.3119 398.437 45.7515 398.437 47.5064H388.442C388.442 45.066 389.251 42.7901 390.869 40.6787C392.487 38.5398 394.68 36.8672 397.45 35.6607C400.247 34.4542 403.359 33.8509 406.787 33.8509C411.997 33.8509 416.151 35.1671 419.249 37.7995C422.348 40.4045 423.938 44.0788 424.021 48.8226V68.8946C424.021 72.898 424.583 76.0925 425.707 78.4781V79.1774H415.506ZM404.524 71.9794C406.499 71.9794 408.35 71.4996 410.077 70.5398C411.832 69.5801 413.148 68.2913 414.026 66.6735V58.2828H408.638C404.936 58.2828 402.153 58.9272 400.288 60.2159C398.423 61.5047 397.491 63.3282 397.491 65.6864C397.491 67.6058 398.122 69.1414 399.383 70.2931C400.672 71.4173 402.386 71.9794 404.524 71.9794Z" fill="#434547"/>
      <path d="M459.434 67.0848C459.434 65.3025 458.694 63.9452 457.213 63.0129C455.76 62.0805 453.333 61.2579 449.933 60.545C446.533 59.832 443.695 58.9272 441.419 57.8303C436.428 55.4173 433.933 51.9212 433.933 47.3419C433.933 43.503 435.551 40.2948 438.787 37.7172C442.022 35.1397 446.135 33.8509 451.126 33.8509C456.446 33.8509 460.737 35.1671 464 37.7995C467.29 40.4319 468.936 43.8458 468.936 48.0411H458.941C458.941 46.1217 458.228 44.5313 456.802 43.2699C455.376 41.9811 453.484 41.3368 451.126 41.3368C448.932 41.3368 447.136 41.844 445.738 42.8586C444.367 43.8732 443.681 45.2305 443.681 46.9306C443.681 48.4662 444.326 49.659 445.614 50.509C446.903 51.359 449.508 52.2228 453.429 53.1003C457.35 53.9503 460.422 54.9786 462.643 56.1851C464.891 57.3642 466.55 58.7901 467.62 60.4627C468.716 62.1354 469.265 64.1645 469.265 66.5501C469.265 70.5536 467.606 73.8029 464.288 76.2982C460.97 78.7661 456.624 80 451.249 80C447.602 80 444.353 79.3419 441.501 78.0257C438.65 76.7095 436.428 74.8997 434.838 72.5964C433.248 70.2931 432.452 67.8115 432.452 65.1517H442.159C442.296 67.5099 443.188 69.3333 444.833 70.6221C446.478 71.8835 448.658 72.5141 451.373 72.5141C454.005 72.5141 456.007 72.0206 457.378 71.0334C458.749 70.0189 459.434 68.7027 459.434 67.0848Z" fill="#434547"/>
      <path d="M497.604 80C491.27 80 486.129 78.012 482.18 74.036C478.259 70.0326 476.298 64.7129 476.298 58.0771V56.8432C476.298 52.401 477.148 48.4387 478.848 44.9563C480.576 41.4464 482.989 38.7181 486.087 36.7712C489.186 34.8243 492.641 33.8509 496.452 33.8509C502.512 33.8509 507.188 35.7841 510.478 39.6504C513.796 43.5167 515.455 48.9871 515.455 56.0617V60.0925H486.375C486.677 63.7669 487.897 66.6735 490.036 68.8123C492.202 70.9512 494.917 72.0206 498.18 72.0206C502.759 72.0206 506.488 70.1697 509.368 66.4679L514.756 71.6093C512.973 74.2691 510.588 76.3393 507.599 77.8201C504.638 79.2733 501.306 80 497.604 80ZM496.411 41.8715C493.669 41.8715 491.448 42.8312 489.748 44.7506C488.075 46.6701 487.006 49.3436 486.54 52.7712H505.584V52.0308C505.364 48.6855 504.473 46.1628 502.91 44.4627C501.347 42.7352 499.181 41.8715 496.411 41.8715Z" fill="#434547"/>
    </svg>
  );
}

function MyApp({ Component, pageProps }) {
  const [web3Provider, setWeb3Provider] = useState(null);

  async function connectWallet() {
    try {
      let web3Modal = new Web3Modal({
        cacheProvider: false,
        providerOptions
      });

      const web3ModalInstance = await web3Modal.connect();
      const web3ModalProvider = new ethers.providers.Web3Provider(web3ModalInstance);
      if (web3ModalProvider) {
        setWeb3Provider(web3ModalProvider);
      }
    } catch (e) {
      console.log(e);
    }
  }

  return (
    <div>
      <div className="h-16 bg-indigo-500 flex justify-center w-full">
        <span className='text-xl text-white font-sans mt-4 font-bold'>NFT-based Fractional Property Ownership App ðŸš€ðŸš€</span>
      </div>
      <Head>
        <title>Fractional Ownership App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" type="image/x-icon" href="/favicon.ico" />
      </Head>
      <nav className="border-b pb-2 flex justify-between w-full">
        <div className="ml-4 mt-4">
          <Link href="/">
            <a>
              <HomebaseLogo />
            </a>
          </Link>
        </div>
        <div className="mt-6">
          <Link href="/create-nft">
            <a className="text-black font-sans text-xl">
              Contract
            </a>
          </Link>
        </div>
        <div className="mt-6">
          <Link href="/transfer">
            <a className="text-black font-sans text-xl">
              Transfer
            </a>
          </Link>
        </div>
        <div className="mt-6">
          <Link href="/my-nfts">
            <a className="text-black font-sans text-xl">
              Ownership
            </a>
          </Link>
        </div>
        { web3Provider == null ? (
          <div>
            <button
              className="bg-indigo-500 hover:bg-indigo-400 text-white font-bold px-4 py-4 rounded-full mt-3 mr-4"
              onClick={connectWallet}>
            Connect Wallet
            </button>
          </div>
          ) : (
          <div className="mt-6 h-10 flex flex-row">
            <div className="mr-2"><BiWallet size={28} color={"rgb(99 102 241)"}/></div>
            <div className="text-indigo-500 text-xl font-sans font-semibold mr-4">{web3Provider.provider.selectedAddress.slice(0,6) + "..." + web3Provider.provider.selectedAddress.slice(-4)}</div>
          </div>
          )}
      </nav>

      <Component {...pageProps} web3Provider={web3Provider}/>

      {/* <footer className="flex flex-1 p-6 bg-indigo-600 w-full bottom-0 relative items-center justify-start">
        <a
          href="https://www.homebase.com.vn/"
          target="_blank"
          rel="noopener noreferrer"
          className="ml-4 text-white font-sans text-base font-medium"
        >
          &copy; Homebase Engineering 2022
        </a>
      </footer> */}
    </div>
  )
}

export default MyApp
